# 통계 정보
비용 기반 최적화에서 가장 중요한 것 = 통계 정보
쿼리 실행 계획 수립할 때, 실제 테이블 데이터 일부 분석해서 통계 정보 보완해서 사용

## MySQL 통계 정보
5.6버전부터 영구적으로 통계정보 관리할 수 있게 개선

각 테이블 통계 정보 = innodb_index_stats 테이블과 innodb_table_stats 테이블에서 관리

### 자동 통계 정보 갱신 조건
1. 테이블 새로 오픈
2. 테이블의 레코드 대량 변경 (1/6 정도의 UPDATE, INSERT, DELETE)
3. ANALYZE TABLE 명령 실행
4. SHOW TABLE STATUS 명령 실행
5. SHOW INDEX FROM 명령 실행
6. InnoDB 모니터 활성화


## 히스토그램
MySQL 8.0 버전부터 인덱스되지 않은 칼럼들에 대해서도 데이터 분포도를 수집해서 저장하는 히스토그램(Histogram) 정보 도입

- 칼럼 단위로 관리
- 버킷(Bucket) 단위로 구분
- ANAYLZE TABLE ... UPDATE  HISTOGRAM 명령 실행으로 수동으로 수집 및 관리
- 시스템 딕셔너리에 저장
- MySQL 서버 시작 시, 딕셔너리의 히스토그램 정보를 information_schema DB의 column_statistics 테이블로 로드

### 타입
#### Singleton(Value-Based 히스토그램)
- 칼럼값 개별로 레코드 건수를 관리하는 히스토그램
- 칼럼이 가지는 값별로 버킷 할당
	- 칼럼의 값과 발생 빈도의 비율, 2개의 값을 가짐

#### Equi-Height(Height-Balanced 히스토그램)
- 칼럼값 범위를 균등한 개수로 구분해서 관리하는 히스토그램
- 개수가 균등한 칼럼값의 범위별로 버킷 할당
	- 각 버킷의 범위 시작값, 마지막 값, 그리고 발생 빈도율과 각 버킷에 포함된 유니크한 값의 개수 등 4개의 값 가짐


### 용도
- 각 범위(버킷)별로 레코드의 건수와 유니크한 값의 개수 정보를 가지기 때문에 정확한 예측 가능함
- 특정 범위의 데이터가 많고 적음을 식별할 수 있음
- 주로 인덱스되지 않은 칼럼에 대한 데이터 분포도를 참조하는 용도로 사용


## 코스트 모델
전체 쿼리의 비용을 계산하는 데 필요한 단위 작업들의 비용




