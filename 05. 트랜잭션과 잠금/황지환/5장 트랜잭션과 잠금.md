# 단원별 키워드
## 1. 트랜잭션
- 잠금 : 동시성 제어
- 트랜잭션 : 데이터의 정합성
- InnoDB는 쿼리 중 일부라도 오류가 발생하면 전체를 Insert 문장을 실행 하기전 상태로 그대로 복구, 다른 엔진들은 해당 기능이 없음
- 커넥션을 소유하는 시간이 길면 안됨(ex, 트랜잭션안에서 네트워크 접근)
## 2. 잠금 
- 글로벌락 : MySQL 서버의 모든 변경 작업을 멈춘다
- 테이블락 : 개별 테이블 단위로 설정되는 잠금, 명시적 또는 묵시적으로 특정 테이블락을 획득할 수 있다.
- 네임드락 : 임의의 문자열에 대해 잠근을 설정할 수 있다. 배치 처리의 시간을 분산하는 것보다, 동일 데이터 변경 참조하는 프로그램끼리 분류해서 네임드 락을 사용하는 방항 추천 
- 매타 데이터락: 데이터베이스 객체(대표적으로 테이블이나 뷰 등)의 이름이나 구조를 변경하는 경우 획득하는 잠금
## 3. InnoDB 스토리지 엔진 잠금
- 레코드 기반의 잠금 방식, 레코드 자체가 아니라 인덱스의 레코드를 잠금
- 레코드와 레코드 사이의 간격을 잠그는 갭(GAP)락이 존재
- 넥스트 키락 현재 레코드와 그 앞의 간격락
- 자동 증가락 : 새로운 insert시 순간에 락
- 레코드를 잠그는 것이 아니라 인덱스를 잠그는 방식으로 처리, 변경해야할 레코드를 찾기위해 검색한 레코드를 모두락으로 걸어야한다.
  - 만약에 레코드에 인덱스가 없는 부분이 있다면, 인덱스가 있는 조건의 레코드들이 다 잠긴다.
- 교재에서는 레코드 수준의 잠금을 확인하는 방법을 설명합니다.


## 3. 격리수준
- 여러 트랜잭션이 동시에 처리될 떄 특정 트랜잭션이 다른 트랜잭셩에서 변경하거나 조회하는 데이터를 볼 수 있게 허용할지 말지를 결정
- Read Uncommited(사용 안함)
  - 각 트랜잭션에서의 변경 내용이 Commit, rollback 여부와 상관없이 다른 트랙잭션에서 보이는 것
- Read Commited(오라클에서 주로 사용)
  - 언두로그를 통해서 변경하기전 값을 이미 복사 해놓고 select 쿼리가 오면 언두 로그영역에 백업된 데이터를 가져온다
  - 하나의 트랜잭션 내에서 똑같은 select 쿼리를 실행했을떄는 항상 같은 결과를 가져와야 한다는 정합성에 어긋남(commit이 되면 언두로그 데이터가 아닌 새로운 데이터를 읽음)
- Repeatble Read(MySQL에서 주로 사용)
  - commit이 되어도 언두로그에 저장된 트랜잭션번호(본인보다 작은 트랜잭션번호의 데이터)로 이전 트랙잭션에서 변경된 데이터를 구분해서 읽음.
  - insert 했을떄는 부정합이 발생합니다.
  - 갭락과 넥스트 키락 덕분에 Repeatble read 격리 수준에서도 팬텀리드가 발생하지 않습니다.
  - 팬텀리드가 어떤 건지는 멧돼지 책을 참고해서 정리
- Serializable(사용 안함)
  - 한 트랜잭션에서 읽고 쓰는 레코드를 다른 트랜잭션에서는 절대 접근할 수 없게
  - 학과에서 배웠던것 정리 필요